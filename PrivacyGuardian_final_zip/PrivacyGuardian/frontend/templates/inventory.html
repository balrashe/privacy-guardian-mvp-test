{% extends 'base.html' %}

{#
  Processing Inventory

  This template allows users to maintain a record of their data
  processing activities.  Users add activities by specifying the
  activity name, purpose, data categories, recipients, retention,
  safeguards and relevant PIPEDA principles.  Existing activities are
  displayed in a table below the form.  The entire inventory can be
  exported to Excel when needed.  The layout follows the cardâ€‘based
  design and adapts to small screens via responsive CSS.
#}

{% block content %}
  {% set page_title = 'Processing Inventory' %}
  <h2>Processing Inventory</h2>
  <p>
    Maintain a record of your data processing activities, including
    purposes, categories, recipients, retention and safeguards.  Add
    activities below and export your inventory for audits or
    documentation.
  </p>
  <div class="card">
    <h3>Add Processing Activity</h3>
    <form method="post">
      <div class="form-group">
        <label for="activity_name">Activity Name</label>
        <input type="text" id="activity_name" name="activity_name" required />
      </div>
      <div class="grid-2">
        <div class="form-group">
          <label for="purpose">Purpose</label>
          <input type="text" id="purpose" name="purpose" />
        </div>
        <div class="form-group">
          <label for="data_categories">Data Categories</label>
          <input type="text" id="data_categories" name="data_categories" />
        </div>
      </div>
      <div class="grid-2">
        <div class="form-group">
          <label for="recipients">Recipients</label>
          <input type="text" id="recipients" name="recipients" />
        </div>
        <div class="form-group">
          <label for="retention">Retention</label>
          <input type="text" id="retention" name="retention" />
        </div>
      </div>
      <div class="grid-2">
        <div class="form-group">
          <label for="safeguards">Safeguards</label>
          <input type="text" id="safeguards" name="safeguards" />
        </div>
        <div class="form-group">
          <label for="pipeda_principles">Relevant PIPEDA Principles</label>
          <input type="text" id="pipeda_principles" name="pipeda_principles" />
        </div>
      </div>
      <button type="submit" class="btn">Add Activity</button>
    </form>
  </div>
  <div class="card">
    <h3>Current Processing Activities</h3>
    {% if table_html %}
      <div class="table-container">{{ table_html | safe }}</div>
      <h4 style="margin-top: 1rem;">Export Inventory</h4>
      <form method="post" action="/inventory_export_excel">
        <button type="submit" class="btn">ðŸ“Š Export to Excel</button>
      </form>
    {% else %}
      <p>No processing activities recorded yet.</p>
    {% endif %}
  </div>
{% endblock %}